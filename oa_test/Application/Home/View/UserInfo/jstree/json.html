<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="jstree/style.min.css">
	<script type="text/javascript" src="jstree/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="jstree/jstree.min.js"></script>
</head>
<body>
	<input type="text" id="plugins4_q" placeholder="输入部门或者姓名">

	<div id="container">
	</div>

	<script>
		$('#container').jstree({
		    'core' : {
		        'data' : {
		            "url" : "demo.json",
		            "data" : function (node) {
		                return { "id" : node.id };
		            }
		        }
		    },
		    "types" : {
			    "default" : {
			      "icon" : "jstree/list.png"  //默认图片
			    },
			    "gs" : {
			      "icon" : "jstree/gs.png" 
			    },
			    "group" : {
			      "icon" : "jstree/zu.png"
			    },
			    "list" : {
			      "icon" : "jstree/list.png"
			    }
		    },
		    "plugins" : [ "types","search"]
		});
		 $('#container').on('changed.jstree',function(e,data){
			//当前选中节点的id
            //console.log(data.instance.get_node(data.selected[0]).id);
            //var domId = data.instance.get_node(data.selected[0]).id;
			//当前选中节点的文本值
            //console.log(data.instance.get_node(data.selected[0]).text);
            //var value = data.instance.get_node(data.selected[0]).text;
            //data.node.state.opened = false;
            
            //获取到自定义链接
            console.log(data.node.li_attr.href);
        });

		var to = false;
	  	$('#plugins4_q').keyup(function () {
		    if(to) { clearTimeout(to); }
		    to = setTimeout(function () {
		      var v = $('#plugins4_q').val();
		      $('#container').jstree(true).search(v);
		    }, 250);
	  	});
	</script>
</body>
</html>